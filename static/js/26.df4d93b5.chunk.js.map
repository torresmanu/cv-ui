{"version":3,"sources":["components/PaddedPaper.js","pages/pages/RegisterForm/RegisterForm.js","components/DataTable/warningDialog.js","pages/auth/authHelper.js","utils/hooksLib.js","pages/pages/Account/MyAccount.js","images/arrow.png","utils/objects.js"],"names":["PaddedPaper","styled","Paper","props","theme","spacing","marginRight","marginLeft","breakpoints","down","RegisterForm","_ref","title","displayBack","marginBottom","children","history","useHistory","React","createElement","marginright","marginleft","Grid","item","Button","color","style","onClick","e","stopPropagation","goBack","Logo","logo","arrow","otherStyles","paddingRight","Typography","component","variant","WarningDialog","open","onClose","contentText","Fragment","Dialog","DialogTitle","id","Divider","DialogContent","map","text","DialogContentText","DialogActions","validatePassword","password","username","notInclude","includes","test","useFormFields","initialState","fields","setValues","useState","event","newFields","path","key","target","name","value","setProperty","BootstrapInput","withStyles","root","marginTop","input","borderRadius","position","backgroundColor","palette","common","white","border","fontSize","padding","transition","transitions","create","borderColor","InputBase","MyAccount","warningDialog","setWarningDialog","passwordMismatchDialog","setPasswordMismatchDialog","handleFieldChange","user_first_name","sessionStorage","getItem","user_last_name","newPassword","passwordConfirmation","handleClose","container","sm","xs","placeholder","onChange","fullWidth","disabled","type","className","float","width","preventDefault","first_name","last_name","AuthService","modifyAccount","lastname","passwd","redirectTo","cancelButton","obj","schema","pList","split","len","length","i","elem","getProperty","undefined","deleteKeysWithStart","startsWith","Object","keys","forEach","removeNotIncluded","object","allowedKeys"],"mappings":"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","file":"static/js/26.df4d93b5.chunk.js","sourcesContent":["import Paper from '@material-ui/core/Paper';\nimport styled from \"styled-components\";\n\n\nconst PaddedPaper = styled(Paper)`\n  padding: ${props => props.theme.spacing(3)}px;\n  margin-bottom: ${props => props.theme.spacing(3)}px;\n  margin-right:${props => props.marginRight ? props.marginRight : props.theme.spacing(3) + 'px'};\n  margin-left:${props => props.marginLeft ? props.marginLeft : props.theme.spacing(3) + 'px'};\n  /* for small screens */\n  ${props => props.theme.breakpoints.down(\"sm\")} {\n    padding: 0px;\n  }\n  box-shadow: none !important;\n`;\nexport default PaddedPaper;\n","import React from 'react';\nimport {Grid, Typography} from '@material-ui/core';\nimport PaddedPaper from \"../../../components/PaddedPaper\";\nimport Button from \"@material-ui/core/Button\";\nimport {Logo} from \"../../components/Logo\";\nimport arrow from \"../../../images/arrow.png\";\nimport {useHistory} from \"react-router-dom\";\n\nexport default function RegisterForm(\n  {  title,\n     displayBack=true,\n     marginRight=\"0%\",\n     marginLeft=\"0%\",\n     marginBottom = '20px',\n     children\n  }) {\n  const history = useHistory();\n\n  return (\n    <PaddedPaper marginright={marginRight} marginleft={marginLeft}>\n      { displayBack ?\n        <Grid item>\n          <Button\n             color='primary'\n             style={{color: '#3397EF'}}\n             onClick={(e)=>{\n               e.stopPropagation();\n               history.goBack();\n             }}\n           >\n            <Logo logo={arrow} otherStyles={{paddingRight: 10}}/>\n            {` Back`}\n           </Button>\n        </Grid>\n      :\n      <div></div>}\n      <Typography component=\"h1\" variant=\"h3\" style={{marginBottom: marginBottom}}>\n        {title}\n      </Typography>\n      {children}\n    </PaddedPaper>\n  );\n}\n","import {Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, Divider} from \"@material-ui/core\";\nimport React from \"react\";\n\nexport default function WarningDialog({open,\n                                       onClose,\n                                       title,\n                                       contentText=[],\n                                       })\n        {\n        return (\n            <React.Fragment>\n                <Dialog\n                  open={open}\n                  onClose={onClose}\n                  aria-labelledby=\"alert-dialog-slide-title\"\n                  aria-describedby=\"alert-dialog-slide-description\">\n                  <DialogTitle id=\"alert-dialog-slide-title\">\n                      {title}\n                  </DialogTitle>\n                  <Divider />\n                  <DialogContent>\n                    {contentText.map((text)=>(\n                      <DialogContentText id=\"alert-dialog-slide-description\">\n                        {text}\n                      </DialogContentText>\n                    ))}\n                  </DialogContent>\n                  <DialogActions>\n                    <Button onClick={onClose} color=\"primary\">\n                      Close\n                    </Button>\n                  </DialogActions>\n                </Dialog>\n            </React.Fragment>\n)\n}\n","export const validateEmail = (email) => {\n  const regex = /^[a-zA-Z0-9]+@(?:[a-zA-Z0-9]+\\.)+[A-Za-z]+$/\n  return regex.test(email)\n};\n\nexport const validatePassword = (password, username) => {\n  //At least: 1 uppercase, 1 lowercase, 1 number, 1 special including _, length between 8 and 64\n  const regex = /^(?=.*[a-zñ])(?=.*[A-ZÑ])(?=.*\\d)(?=.*[@$!%*?&_])[A-Za-zñÑ\\d@$!%*?&_]{8,64}$/;\n  \n  //Password must not include username\n  const notInclude = !password.includes(username);\n  return regex.test(password) && notInclude;\n};\n","import { useState, useReducer, useMemo } from \"react\";\nimport {deleteKeysWithStart, getProperty, setProperty} from \"./objects\";\nimport store from \"../redux/store\";\nimport {setFormStatus} from \"../redux/actions/formsActions\";\nimport {produce} from 'immer';\nimport {trimChar} from \"./strings\";\n\n\nexport function useFormFields(initialState) {\n  const [fields, setValues] = useState(initialState);\n  return [\n    fields,\n    //  handleFieldChange\n    function(event) {\n      const newFields = {...fields};\n\n      const path = event.key || event.target.id || event.target.name;\n      const value = event.target ? event.target.value : event.value;\n      setProperty(newFields, path, value);\n\n      setValues({\n        ...newFields\n      });\n    },\n    //  reset\n    function() {\n      setValues(initialState);\n    }\n  ];\n}\nfunction findValidator(fieldName, validators) {\n  const properties = fieldName.split('.');\n  let validator = null;\n  const indexes = [];\n  const isRootField = properties.length === 1;\n  properties.forEach(\n    property => {\n      if(!isNaN(property)){\n        indexes.push(parseInt(property));\n      }\n      if (validator) {\n        const subValidator = validator[property];\n        if (subValidator) {\n          validator = subValidator;\n        }\n        return\n      }\n\n      const rootValidator = validators[property];\n      const isFunction = rootValidator instanceof Function;\n      //  Avoid assign root validator to nested fields\n      if(!isFunction || (isFunction && isRootField)){\n        validator = validators[property];\n      }\n    }\n  );\n  return {validator, indexes};\n}\n\nfunction validate(fieldName, fields, validators, fieldValue=undefined, extraArgs={}, initialState) {\n  const {validator, indexes} = findValidator(fieldName, validators);\n  let error;\n  if (validator && validator instanceof Function) {\n    const valueIndex = indexes[indexes.length - 1];\n    let value;\n    if(fieldValue === undefined) {\n      value = getProperty(fields, fieldName);\n    } else {\n      value = fieldValue;\n    }\n    const initialValue = getProperty(initialState, fieldName);\n    const validatorArgs = {value, fields, valueIndex, indexes, initialValue, ...extraArgs};\n    error = validator(validatorArgs);\n  }\n  if (error) {\n    fields.errors[fieldName] = error;\n  } else {\n    delete fields.errors[fieldName];\n  }\n}\nconst formReducer = ({validators, initialState, emptyInitialState}) => function (draft, action) {\n  function runValidators(fields, previousKey=\"\") {\n    for (let key in fields) {\n      if(key === \"errors\") continue;\n\n      const value = fields[key];\n\n      if (value instanceof Object){ // Also applies for Arrays\n        runValidators(value, `${previousKey}.${key}`)\n      } else {\n        const fieldName = `${previousKey}.${key}`;\n        validate(trimChar(fieldName, \".\"), draft, validators, undefined, action.extraArgs, initialState);\n      }\n    }\n  }\n  switch (action.type) {\n    case 'FIELD_CHANGE': {\n      validate(action.fieldName, draft, validators, action.fieldValue, {}, initialState);\n      setProperty(draft, action.fieldName, action.fieldValue);\n      if(action.callback) action.callback(draft);\n      if(!draft.dirty && action.fieldValue?.length>0) {\n        store.dispatch(setFormStatus({model: draft.formModel, dirty: true}));\n        draft.dirty = true;\n      }\n      return;\n    }\n    case 'ADD_EMPTY_FIELD': {\n      const path = action.path;\n      let sample;\n      if (action.sample){\n        sample = action.sample;\n      } else {\n        sample = getProperty(emptyInitialState || initialState, path)[0];\n      }\n      getProperty(draft, path).push({...sample});\n      return;\n    }\n    case 'REMOVE_FIELD': {\n      const { path, index } = action;\n      getProperty(draft, path).splice(index, 1);\n      deleteKeysWithStart(draft.errors, `${path}.${index}`);\n      return;\n    }\n\n    case 'SUBMIT':\n      if (action.preValidator){\n        const {fieldName, fieldValue} = action.preValidator(draft)\n        setProperty(draft, fieldName, fieldValue);\n      }\n      runValidators(draft);\n\n      if(Object.keys(draft.errors).length === 0){\n        action.handleSubmit(draft);\n        store.dispatch(setFormStatus({model: draft.formModel, dirty: false}));\n        draft.dirty = false;\n      }\n      return;\n    default:\n  }\n}\n\nexport function useFormReducer({initialState, emptyInitialState, validators = {}}){\n  const memoizedInitialState = useMemo(\n    () => ({\n      ...initialState,\n      errors: {}\n    }),\n    []\n  );\n\n  const curriedFormReducer = useMemo(\n    () => {\n      return produce(formReducer({validators, initialState: memoizedInitialState, emptyInitialState}))\n    },\n    [memoizedInitialState]\n  );\n  const [state, dispatch] = useReducer(curriedFormReducer, memoizedInitialState);\n\n  const handleFieldChange = (e) => {\n    let fieldName, fieldValue;\n    const {target, key, value, callback, initialValue} = e;\n    if(target){\n      fieldName = e.target.name || e.target.id;\n      fieldValue = e.target.value;\n    } else {\n      fieldName = key;\n      fieldValue = value;\n    }\n\n    dispatch({\n      type: 'FIELD_CHANGE',\n      fieldName,\n      fieldValue,\n      callback,\n      initialValue\n    })\n  };\n\n  const addEmptyItem = (path, sample=null) => {\n    dispatch({\n      type: 'ADD_EMPTY_FIELD',\n      path,\n      sample\n    })\n  };\n\n  const removeItem = (path, index) => {\n    dispatch({\n      type: 'REMOVE_FIELD',\n      path,\n      index\n    })\n  };\n\n  const submit = (handleSubmit, preValidator=null, extraArgs) => {\n    dispatch({\n      type: 'SUBMIT',\n      handleSubmit,\n      preValidator,\n      extraArgs\n    })\n  };\n\n  const hasErrors = Object.keys(state.errors).length > 0;\n\n  return {fields: state, dispatch, hasErrors, submit, handleFieldChange, addEmptyItem, removeItem};\n}","import React from \"react\";\nimport { useFormFields } from \"../../../utils/hooksLib\";\nimport { Button, Grid, Typography, Divider } from \"@material-ui/core\";\nimport WarningDialog from \"../../../components/DataTable/warningDialog\";\nimport RegisterForm from \"../RegisterForm/RegisterForm\";\nimport { withStyles } from '@material-ui/core/styles';\nimport InputBase from '@material-ui/core/InputBase';\nimport { validatePassword } from \"../../auth/authHelper\";\nimport { AuthService } from \"../../../services/AuthService\";\nimport { redirectTo } from \"../../../routes/functions\";\n\nconst BootstrapInput = withStyles((theme) => ({\n  root: {\n    'label + &': {\n      marginTop: theme.spacing(3),\n    },\n  },\n  input: {\n    borderRadius: 8,\n    position: 'relative',\n    backgroundColor: theme.palette.common.white,\n    border: '1px solid #ced4da',\n    fontSize: 16,\n    padding: '10px 12px',\n    transition: theme.transitions.create(['border-color', 'box-shadow']),\n    '&:focus': {\n      borderColor: '#3397EF',\n    },\n    '&:hover': {\n      borderColor: '#3397EF',\n    },\n  },\n}))(InputBase);\n\nfunction MyAccount() {\n  const [warningDialog, setWarningDialog] = React.useState(false);\n  const [passwordMismatchDialog, setPasswordMismatchDialog] = React.useState(false);\n\n  const [fields, handleFieldChange] = useFormFields({\n    user_first_name: sessionStorage.getItem('user_first_name') || '',\n    user_last_name: sessionStorage.getItem('user_last_name') || '',\n    username: sessionStorage.getItem('username') || '',\n    newPassword: \"\",\n    passwordConfirmation: \"\"\n  });\n\n  function validateForm() {\n    return validatePassword(fields?.newPassword, fields?.username) &&\n      (fields.newPassword === fields.passwordConfirmation);\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault();\n    const first_name = fields.user_first_name !== sessionStorage.getItem('user_first_name') ? fields.user_first_name : null;\n    const last_name = fields.user_last_name !== sessionStorage.getItem('user_last_name') ? fields.user_last_name : null;\n    const password = fields.newPassword !== \"\" ? fields.newPassword : null;\n    if (password) {\n      if (fields.newPassword !== fields.passwordConfirmation) {\n        setPasswordMismatchDialog(true);\n      } else if (validateForm()) {\n        AuthService.modifyAccount({ name: first_name, lastname: last_name, passwd: password });\n      } else {\n        setWarningDialog(true);\n      }\n    } else {\n      AuthService.modifyAccount({ name: first_name, lastname: last_name });\n    }\n  }\n\n  const handleClose = () => {\n    setWarningDialog(false);\n    setPasswordMismatchDialog(false);\n  };\n\n  return (\n    <>\n      <RegisterForm title={'My Account'} displayBack={false}>\n        <>\n          <form>\n            <React.Fragment>\n              <Grid container spacing={5} style={{ marginTop: '30px' }}>\n                <Grid item sm={4} xs={6}>\n                  <Typography variant='body1'>\n                    First Name\n                  </Typography>\n                  <BootstrapInput\n                    id={'user_first_name'}\n                    value={fields?.user_first_name}\n                    placeholder=\"Enter First Name\"\n                    onChange={handleFieldChange}\n                    fullWidth\n                  />\n                </Grid>\n                <Grid item sm={4} xs={6}>\n                  <Typography variant='body1'>\n                    Last Name\n                  </Typography>\n                  <BootstrapInput\n                    id={'user_last_name'}\n                    value={fields?.user_last_name}\n                    placeholder=\"Enter Last Name\"\n                    onChange={handleFieldChange}\n                    fullWidth\n                  />\n                </Grid>\n              </Grid>\n              <Grid container spacing={5}>\n                <Grid item sm={4} xs={6}>\n                  <Typography variant='body1'>\n                    Email\n                  </Typography>\n                  <BootstrapInput\n                    id={'username'}\n                    value={fields?.username}\n                    fullWidth\n                    disabled={true}\n                  />\n                </Grid>\n              </Grid>\n              <Grid container spacing={5} style={{ marginTop: \"10px\" }}>\n                <Grid item sm={4} xs={6}>\n                  <Typography variant='body1'>\n                    New Password\n                  </Typography>\n                  <BootstrapInput\n                    id={'newPassword'}\n                    type=\"password\"\n                    value={fields?.newPassword}\n                    placeholder=\"Enter Value\"\n                    onChange={handleFieldChange}\n                    fullWidth\n                  />\n                </Grid>\n                <Grid item sm={4} xs={6}>\n                  <Typography>\n                    Confirm New Password\n                  </Typography>\n                  <BootstrapInput\n                    id={'passwordConfirmation'}\n                    type=\"password\"\n                    value={fields?.passwordConfirmation}\n                    placeholder=\"Enter Value\"\n                    onChange={handleFieldChange}\n                    fullWidth\n                  />\n                </Grid>\n              </Grid>\n            </React.Fragment>\n            <Divider style={{ marginTop: 30 }} />\n            <Grid container spacing={3}>\n              <Grid item xs={12}>\n                <div style={{ marginTop: \"25px\" }}>\n                  <Button\n                    className={\"save\"}\n                    style={{ float: \"right\", borderRadius: '8px', marginLeft: \"10px\", marginBottom: \"15px\", width: \"144px\" }}\n                    variant=\"contained\"\n                    color=\"primary\"\n                    onClick={handleSubmit}\n                    disabled={false}\n                  >\n                    SAVE\n                  </Button>\n                </div>\n                <div style={{ marginTop: \"25px\" }}>\n                  <Button\n                    className={\"save\"}\n                    style={{ float: \"right\", borderRadius: '8px', marginBottom: \"15px\", width: \"100px\" }}\n                    color=\"primary\"\n                    variant=\"outlined\"\n                    onClick={() => redirectTo('/institutions')}\n                  >\n                    CANCEL\n                  </Button>\n                </div>\n              </Grid>\n            </Grid>\n          </form>\n          <WarningDialog\n            open={warningDialog}\n            onClose={handleClose}\n            cancelButton={true}\n            title={'The password must meet the following requirements'}\n            contentText={[\n              'Between 8 and 64 characters',\n              'Must contain at least 1 uppercase, 1 lowercase, 1 number, and 1 special character',\n              'Must not contain the username, dots o commas'\n            ]}\n          />\n          <WarningDialog\n            open={passwordMismatchDialog}\n            onClose={handleClose}\n            cancelButton={true}\n            title={'Password Mismatch'}\n            contentText={['The new password and password confirmation do not match.']}\n          />\n        </>\n      </RegisterForm>\n    </>\n  );\n}\n\nexport default MyAccount;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAMCAYAAACulacQAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAB3SURBVHgBfZDLDYAgEERHK5AOLIGjbViGoQmtwqNaCQ0YQydcTYzgQqKJsDoHIPuG/QE/KtJAM9r6APTp0JYc8MBslDAFB7ZODE9aDkT4BYLKnQ4fHi5vLgYk/abONBmWVYke6Sic4ZUqNWR1boOjJYCTnGwV7gtBnz3unRiQJwAAAABJRU5ErkJggg==\"","export function setProperty(obj, path, value) {\n  let schema = obj;\n  const pList = path.split('.');\n  const len = pList.length;\n  for(let i = 0; i < len-1; i++) {\n    const elem = pList[i];\n    if( !schema[elem] ) schema[elem] = {}\n    schema = schema[elem];\n  }\n\n  schema[pList[len-1]] = value;\n}\n\nexport function getProperty(obj, path) {\n  let schema = obj;\n  const pList = path.split('.');\n  const len = pList.length;\n  for(let i = 0; i < len; i++) {\n    const elem = pList[i];\n    if(schema === undefined) return null;\n    schema = schema[elem];\n  }\n\n  return schema;\n}\n\n// const obj = {\n//   'someProp.0.nestedProp1': \"\",\n//   'someProp.0.nestedProp2': \"\",\n//   'someProp.1.nestedProp1': \"\",\n// }\n//\n// deletePath(obj, 'someProp.0')\n//\n// expected obj = {\n//   'someProp.1.nestedProp1': \"\",\n// }\nexport function deleteKeysWithStart(obj, startsWith) {\n  Object.keys(obj).forEach(key => {\n    if(key.startsWith(startsWith)){\n      delete obj[key];\n    }\n  })\n}\n\nexport const removeNotIncluded = (object, allowedKeys) => {\n  const objectKeys = Object.keys(object);\n  objectKeys.forEach(\n    key => {\n      if(!(allowedKeys.includes(key))){\n        delete object[key];\n      }\n    }\n  )\n  return object;\n};\n\n\nconst isAValue = ([key, value]) => {\n  if(key === 'custom_fields'){\n    return value.some(customField => customField.value)\n  }\n\n  if(value === false || value === 0) {\n    return true; //  false and 0 are values.\n  }\n\n  if(!value) {\n    return false;  //  value is null or undefined\n  }\n\n  if(value.constructor === Object) {\n    return Object.entries(value).length > 0\n  }\n\n  if(value.constructor === Array) {\n    if(value.length > 0) {\n      return value.some(hasSomeValue)\n    } else {\n      return false\n    }\n  }\n\n  return true;  // value is string, number, timestamp, etc\n};\n\nconst hasSomeValue = obj => {\n  const objectEntries = Object.entries(obj);\n\n  if(objectEntries.length === 0) return false;\n\n  return objectEntries.some(isAValue);\n}\n\n// params: array of objects { key: value }\n// return a new array, without the empty values objects like { a: '' , b: ''}\n// example: \n//   param = [{a: 1}, {b: ''}, {c: '', d: 'hola'}]\n//   clearEmptyHashOfArray(param)\n// result = [{a: 1}, {c: '', d: 'hola'}]\nexport const clearEmptyHashOfArray = (array) => {\n  return array.filter(hasSomeValue)\n}\n\nexport const toPlainObject = draft => (\n  JSON.parse(JSON.stringify(draft))\n)\n\nexport const objectValuesAreNotEmpty = object => {\n  return Object.values(object).every(value => Boolean(value))\n}"],"sourceRoot":""}